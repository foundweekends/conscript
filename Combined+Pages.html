<!DOCTYPE html SYSTEM "about:legacy-compat">
<html>
      <head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <title>Conscript — Combined Pages</title>
        <link rel="shortcut icon" href="favicon.ico"/>
        <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css"/>
        <link rel="stylesheet" href="css/pamflet.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/pamflet-print.css" type="text/css" media="print"/>
        <link rel="stylesheet" href="css/pamflet-grid.css" type="text/css" media="screen and (min-device-width: 800px), projection"/>
        <link rel="stylesheet" href="css/color_scheme-redmond.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/color_scheme-github.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/color_scheme-monokai.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/pamfletheight_2em_2em.css" type="text/css" media="screen and (min-device-width: 800px), projection"/>
        <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.bundle.min.js"></script>
        <script type="text/javascript" src="js/pamflet.js"></script>
        <script type="text/javascript">
          Pamflet.page.language = 'en';
        </script>
        <script type="text/javascript" src="js/prettify/prettify.js"></script><script type="text/javascript" src="js/prettify/lang-scala.js"></script><link type="text/css" rel="stylesheet" href="css/prettify.css"/><script type="text/javascript"><!--
        window.onload=function() { prettyPrint(); };
      --></script>
        <link rel="stylesheet" href="css/custom.css" type="text/css" media="screen, projection"/>
        
        
      </head>
      <body class="color_scheme-github">
        <div class="container-fluid contentswrapper h-100">
          <div class="row minh-100">
          <div class="col-md-4 col-xl-3 leftcolumn">&nbsp;</div><div class="col-md-8 col-xs-9">
                  <div class="rightcolmn contents">
                    <div class="tocwrapper">
        
        <div class="tocbody show" id="toc">
        <h4 class="toctitle">Contents</h4>
        <div><a href="#Conscript">Conscript</a></div><ol class="toc"> <li><div><a href="#Installing+conscript">Installing conscript</a></div></li><li><div><a href="#Using+conscript">Using conscript</a></div></li><li><div><a href="#How+does+conscript+work%3F">How does conscript work?</a></div></li><li><div><a href="#Private+repositories">Private repositories</a></div></li><li><div><a href="#Making+a+conscripted+app">Making a conscripted app</a></div></li><li><div><a href="#Conscripted+apps">Conscripted apps</a></div></li> </ol></div>
      </div><h1 id="Conscript">Conscript<a href="#Conscript" class="header-link"><span class="header-link-content">&nbsp;</span></a></h1><p>Conscript is a distribution mechanism for Scala apps using GitHub and Maven repositories as the infrastructure. You can use it to install and update apps similar to APT or Home Brew.
</p><p>It does less than you think, because the sbt launcher does more than you think. More on that later.
</p><h2 id="Installing+conscript">Installing conscript<a href="#Installing+conscript" class="header-link"><span class="header-link-content">&nbsp;</span></a></h2><h3 id="Set+up+environment+variables">Set up environment variables<a href="#Set+up+environment+variables" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>Depending on your OS the format might be different, but set up the following three environment variables.
</p><pre><code>export CONSCRIPT_HOME=&quot;$HOME/.conscript&quot;
export CONSCRIPT_OPTS=&quot;-XX:MaxPermSize=512M -Dfile.encoding=UTF-8&quot;
export PATH=$CONSCRIPT_HOME/bin:$PATH
</code></pre><ul><li><code>CONSCRIPT_HOME</code> is where Conscript will download various files.
</li><li><code>CONSCRIPT_OPTS</code> is JVM arguments passed on to the apps that you installed using Conscript.
</li><li>By default Conscript will create the launching script for the apps in <code>$CONSCRIPT_HOME/bin</code>. Optionally you can change this location using <code>$CONSCRIPT_BIN</code> for example to <code>~/bin/</code>
</li><li><code>PATH</code> is your OS’s path variable. Add <code>$CONSCRIPT_HOME/bin</code> or <code>$CONSCRIPT_BIN</code> to the path.
</li></ul><p>There are three methods of installation available
</p><h3 id="Cross+platform">Cross platform<a href="#Cross+platform" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>Download the conscript <a href="https://repo1.maven.org/maven2/org/foundweekends/conscript/conscript_2.11/0.5.5/conscript_2.11-0.5.5-proguard.jar">runnable jar</a>. On most OSes you can run it by double-clicking, but if that doesn’t work you can also run it from the command line.
</p><pre><code class="">$ java -jar conscript_2.11-0.5.5-proguard.jar
</code></pre><p>A “splash screen” will appear during installation. Don’t close it until you see a message that <code>cs</code> was installed, or that something went wrong.
</p><h3 id="Linux%2C+Mac">Linux, Mac<a href="#Linux%2C+Mac" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>If you prefer, you can install conscript by piping this shell script.
</p><pre><code class="">wget https://raw.githubusercontent.com/foundweekends/conscript/master/setup.sh -O - | sh
</code></pre><h3 id="Windows">Windows<a href="#Windows" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>If you prefer, you can download the PowerShell <a href="https://raw.githubusercontent.com/foundweekends/conscript/master/setup.ps1">script</a> and run it.
</p><h2 id="Using+conscript">Using conscript<a href="#Using+conscript" class="header-link"><span class="header-link-content">&nbsp;</span></a></h2><p>The main thing you do with conscript is install and update commands based on <code>launchconfig</code>.
<code>launchconfig</code> files are stored in GitHub projects, which you pass into the <code>cs</code> command.
For example, this installs the giter8 templating system:
</p><pre><code class="">$ cs foundweekends/giter8
</code></pre><p><code>launchconfig</code>s specify a version of the app to use, but you can override that by specifying an explicit version with another slash:
</p><pre><code class="">$ cs foundweekends/giter8/0.2.1
</code></pre><p>Project owners may also decide to push pre-release or other alternate <code>launchconfig</code> to different branches on GitHub. Use can tell conscript read <code>launchconfig</code>s from another branch with the <code>--branch</code> or <code>-b</code> option.
</p><pre><code class="">$ cs foundweekends/giter8 --branch staging
</code></pre><h3 id="Cleaning+boot+directory">Cleaning boot directory<a href="#Cleaning+boot+directory" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>If at some point your conscript boot directory contains stale/suspect artifacts such as snapshot releases, you can clean it:
</p><pre><code class="">$ cs --clean-boot
</code></pre><p>When you next run any conscripted app (such as <code>cs</code>) it will fetch its cleaned dependencies back into the shared boot directory; generally it only has to look as far as the local ivy cache to find them.
</p><h2 id="How+does+conscript+work%3F">How does conscript work?<a href="#How+does+conscript+work%3F" class="header-link"><span class="header-link-content">&nbsp;</span></a></h2><p>Conscript does <em>less</em> than you think, because the sbt launcher does more than
you think. What?
</p><p><br><strong>What conscript does:</strong>
</p><ul><li>Queries a GitHub project for <code>launchconfig</code>s (launcher configurations)
</li><li>Copies <code>launchconfig</code>s to your local filesystem, with a personalized boot path
</li><li>Creates scripts to execute the launch configurations
</li></ul><p><strong>What sbt launcher does:</strong>
</p><ul><li>Reads a given <code>launchconfig</code>
</li><li>Fetches needed dependencies on the first run
</li><li>Uses the same Ivy cache as sbt itself
</li></ul><p>So conscript just assumes a convention and helps you adhere to
it.
Suppose you’ve configured <code>$CONSCRIPT_HOME</code> to <code>$HOME/.conscript</code>.
</p><p>Then <code>$CONSCRIPT_HOME/boot</code> is used as a boot directory for
all.
App <code>launchconfig</code>s are stored according to the GitHub
project name and the script name, such as:
</p><pre><code>$CONSCRIPT_HOME/foundweekends/conscript/cs/launchconfig
</code></pre><p>And finally, shell scripts are created in <code>$CONSCRIPT_BIN</code>
(default: <code>$CONSCRIPT_HOME/bin</code>) that reference <code>launchconfig</code>s,
for example, <code>~/.conscript/bin/cs</code>. This is how the shell script looks like on Mac:
</p><pre><code class="">#!/bin/sh
java -jar /Users/foo/.conscript/sbt-launch.jar \
  @/Users/foo/.conscript/foundweekends/conscript/cs/launchconfig &quot;$@&quot;
</code></pre><p>Once the shell script is created, now it’s up to the sbt launcher to carry out the actual work of fetching artifacts and running the app.
</p><h2 id="Private+repositories">Private repositories<a href="#Private+repositories" class="header-link"><span class="header-link-content">&nbsp;</span></a></h2><p>Conscript supports <strong>private github repos</strong> using github’s oauth flow
<a href="http://developer.github.com/v3/oauth/#create-a-new-authorization">for non-web apps</a>.
</p><p>To authenticate and store a permanent token, use the <code>--auth</code> parameter:
</p><pre><code class="">$ cs --auth yourname:yourpass
</code></pre><p>This stores an access token in <code>~/.conscript/config</code> which is used for
all future <code>cs</code> invocations. You can revoke tokens at any time in your
<a href="https://github.com/settings/applications">GitHub account settings</a>.
</p><p>The sbt launcher can access <strong>private Maven/Ivy repos</strong> just as sbt
itself can. Specify a credentials properties file, such as
<code>~/.ivy2/.credentials</code>, in the <code>sbt.boot.credentials</code> JVM property or
<code>SBT_CREDENTIALS</code> environment variable. The launcher will use these
credentials when accessing protected resources in the specified realm.
</p><h2 id="Making+a+conscripted+app">Making a conscripted app<a href="#Making+a+conscripted+app" class="header-link"><span class="header-link-content">&nbsp;</span></a></h2><p>We hope you’ll make your own apps that use conscript.
</p><h3 id="ConscriptPlugin">ConscriptPlugin<a href="#ConscriptPlugin" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>The <code>ConscriptPlugin</code> makes these easier to build and test.
Add this to the following <code>project/conscript.sbt</code>:
</p><pre><code class="prettyprint lang-scala">addSbtPlugin(&quot;org.foundweekends.conscript&quot; % &quot;sbt-conscript&quot; % &quot;0.5.5&quot;)
</code></pre><p>Next enable <code>ConscriptPlugin</code> on the app subproject in <code>build.sbt</code>:
</p><pre><code class="">lazy val root = (project in file(&quot;.&quot;)).
  enablePlugins(ConscriptPlugin).
  settings(
    // other settings here
  )
</code></pre><p>The plugin brings in a “provided” dependency to sbt launcher-interface.
</p><h3 id="Entry+point">Entry point<a href="#Entry+point" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>Make the entry point to your app by implementing <code>xsbti.AppMain</code>.
</p><pre><code class="prettyprint lang-scala">package example

class HelloApp extends xsbti.AppMain {
  def run(configuration: xsbti.AppConfiguration): xsbti.MainResult = {
    // get the version of Scala used to launch the application
    val scalaVersion = configuration.provider.scalaProvider.version

    // Print a message and the arguments to the application
    println(&quot;Hello world!  Running Scala &quot; + scalaVersion)
    configuration.arguments.foreach(println)

    new Exit(0)
  }
  class Exit(val code: Int) extends xsbti.Exit
}
</code></pre><p>After one or two command line options, you might want to take a look at <a href="https://github.com/scopt/scopt">scopt</a> to do commandline parsing.
</p><h3 id="launchconfig">launchconfig<a href="#launchconfig" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>Next, add your sbt <code>launchconfig</code> file to <code>src/main/conscript/XYZ/launchconfig</code> (substitue <code>XYZ</code> with your script name such as <code>g8</code> and <code>cs</code>):
</p><pre><code class="">[app]
  version: 0.1.0
  org: com.example
  name: hello
  class: example.HelloApp
[scala]
  version: 2.11.12
[repositories]
  local
  maven-central
</code></pre><p>To learn more about the <code>launchconfig</code>, see <a href="https://www.scala-sbt.org/1.x/docs/Sbt-Launcher.html">sbt Launcher</a> section of the sbt Reference Manual.
</p><h3 id="csRun">csRun<a href="#csRun" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>You can test the app by calling <code>csRun XYZ</code> command.
</p><h2 id="Conscripted+apps">Conscripted apps<a href="#Conscripted+apps" class="header-link"><span class="header-link-content">&nbsp;</span></a></h2><p>Because conscipt uses a known path <code>/src/main/conscript/</code> on GitHub, we can <a href="https://github.com/search?o=desc&amp;q=+path%3Asrc%2Fmain%2Fconscript++org&amp;ref=searchresults&amp;s=indexed&amp;type=Code&amp;utf8=%E2%9C%93">search</a> the GitHub repos to discover conscripted apps.
</p><p>Let us know if you’ve written a conscripted app.
</p><ul><li><a href="https://github.com/foundweekends/conscript">foundweekends/conscript</a>. conscript itself is a conscripted app.
</li><li><a href="https://github.com/foundweekends/giter8">foundweekends/giter8</a>. giter8 is a tool to apply templated hosted on GitHub.
</li><li><a href="https://github.com/foundweekends/pamflet">foundweekends/pamflet</a>. A publishing application for short texts.
</li><li><a href="https://github.com/sbt/sbt">sbt/sbt</a>. sbt provides apps for <code>sbt</code>, <code>scalas</code> (<a href="https://www.scala-sbt.org/1.x/docs/Scripts.html">sbt Script runner</a>), and <code>screpl</code>.
</li><li><a href="https://github.com/n8han/herald">n8han/herald</a>. Tell the world about your latest software release.
</li><li><a href="https://github.com/softprops/picture-show">softprops/picture-show</a>. slip and slide picture shows for the web.
</li><li><a href="https://github.com/softprops/unplanned">softprops/unplanned</a>. instant http.
</li><li><a href="https://github.com/softprops/gooose">softprops/gooose</a>. when I tap you, you shall become the goose.
</li><li><a href="https://github.com/softprops/spakle">softprops/spakle</a>. ▁▇▁▄▃▂▄▄▆▆▅▃▅▁▂ just like nyc’s skyline.
</li><li><a href="https://github.com/softprops/pj">softprops/pj</a>. a pajama party for your json strings and streamers.
</li><li><a href="https://github.com/softprops/gist">softprops/gist</a>. it’s like git with an s between the i and t.
</li><li><a href="https://github.com/softprops/chrome-pilot">softprops/chrome-pilot</a>. chrome is your airship. your helm is the command line.
</li><li><a href="https://github.com/softprops/pb">softprops/pb</a>. cat once, stash anywhere
</li><li><a href="https://github.com/softprops/hostclub">softprops/hostclub</a>. your host mappings are all up in the club
</li><li><a href="https://github.com/philcali/cronish-app">philcali/cronish-app</a>. An app to define sh command interval execution.
</li><li><a href="https://github.com/philcali/monido">philcali/monido</a>. Scala monitoring service.
</li><li><a href="https://github.com/philcali/scagen">philcali/scagen</a>. A flexible site generating tool.
</li><li><a href="https://github.com/philcali/saydo">philcali/saydo</a>. Weekly todo template in markdown.
</li><li><a href="https://github.com/philcali/lmxml">philcali/lmxml</a>. The Light Markup to XML.
</li><li><a href="https://github.com/philcali/puppet-master">philcali/puppet-master</a>. Scripted LMXML HTTP client (puppet).
</li><li><a href="https://github.com/philcali/robot-vision">philcali/robot-vision</a>. Embedded server to allow remote control over desktop.
</li><li><a href="https://github.com/philcali/spdf">philcali/spdf</a>. Quickly create PDFs on the command-line.
</li><li><a href="https://github.com/philcali/webdir">philcali/webdir</a>. Start an embedded web server to download and upload file from a directory.
</li><li><a href="https://github.com/eed3si9n/scalaxb">eed3si9n/scalaxb</a>. an XML data binding tool for Scala.
</li><li><a href="https://github.com/eed3si9n/doctrine">eed3si9n/doctrine</a>. an app to download Scala docs.
</li><li><a href="https://github.com/todesking/jcon">todesking/jcon</a>. A generic JDBC console.
</li><li><a href="https://github.com/todesking/nyandoc">todesking/nyandoc</a>. Javadoc/Scaladoc to markdown converter.
</li><li><a href="https://github.com/tototoshi/hatenacala">tototoshi/hatenacala</a>. A commandline tool for Hatena Diary.
</li><li><a href="https://github.com/tototoshi/mvnsearch">tototoshi/mvnsearch</a>. A tool for searching Java/Scala library.
</li><li><a href="https://github.com/cb372/scala-ascii-art">cb372/scala-ascii-art</a>. A simple Ascii art generator.
</li><li><a href="https://github.com/arosien/sniff">arosien/sniff</a>. Generate “bad code smells” specs2 specifications.
</li><li><a href="https://github.com/stackmob/lucid">stackmob/lucid</a>. The StackMob provisioning API test tool.
</li><li><a href="https://github.com/katlex/jscs">katlex/jscs</a>. Javascript compilation service.
</li><li><a href="https://github.com/judu/jetdoc">judu/jetdoc</a>. Get and serve javadoc on demand.
</li><li><a href="https://github.com/numa08/ShadowDancer">numa08/ShadowDancer</a>. Data transfer tool for Kagemai.
</li><li><a href="https://github.com/tkawachi/hocon2json">tkawachi/hocon2json</a>. Convert from Typesafe config (including HOCON) to JSON.
</li><li><a href="https://github.com/paulmr/quiptic-to-puz">paulmr/quiptic-to-puz</a>. Unofficial scraper for some specific crosswords.
</li><li><a href="https://github.com/alexarchambault/artifact-app">alexarchambault/artifact-app</a>. Run app from Ivy/maven modules.
</li><li><a href="https://github.com/kazuhito-m/mindmeister2trello-importer">kazuhito-m/mindmeister2trello-importer</a>. Mindmeister to Trello importer.
</li><li><a href="https://github.com/xuwei-k/mima">xuwei-k/mima</a> conscript typesafe/migration-manager
</li></ul>
                  </div>
                </div>
          </div> <!-- row -->
        </div>
        <div class="header">
          <div class="container-fluid top nav">
        <div class="row justify-content-md-center w-100">
          <div class="col-md-auto">
            <div class="title">
              <span>Conscript</span> — Combined Pages
            </div>
          </div>
        </div>
      </div>
        </div>
        <div class="footer">
          
        </div>
        
        
      </body>
    </html>